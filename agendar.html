<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendar Consulta</title>
    <link rel="stylesheet" href="css/agendar.css">
</head>
<body>
    <div class="container">
        <section class="service-selector">
            <label>Selecione o tipo:</label>
            <select class="service-dropdown">
                <option selected>Consulta</option>
                <option>Vacina</option>
                <option>Banho</option>
                <option>Tosa</option>
            </select>
        </section>

        <section class="date-selector">
            <p>Escolha a melhor data para a sua consulta</p>
            
            <div class="calendar">
                <div class="calendar-header">
                    <button class="nav-btn prev-month">&lt;</button>
                    <div class="current-month">
                        <h2>Dezembro</h2>
                        <span>2024</span>
                    </div>
                    <button class="nav-btn next-month">&gt;</button>
                </div>

                <div class="weekdays">
                    <span>Dom</span>
                    <span>Seg</span>
                    <span>Ter</span>
                    <span>Qua</span>
                    <span>Qui</span>
                    <span>Sex</span>
                    <span>Sab</span>
                </div>

                <div class="calendar-grid" id="calendar-days">
                </div>
            </div>
        </section>

        <section class="time-slots">
            <h3>Horários disponíveis</h3>
            <div class="time-grid">
                <button class="time-btn">8:00</button>
                <button class="time-btn available">9:00</button>
                <button class="time-btn">11:00</button>
                <button class="time-btn">12:00</button>
                <button class="time-btn">14:00</button>
                <button class="time-btn">15:00</button>
                <button class="time-btn">17:00</button>
                <button class="time-btn">18:00</button>
                <button class="time-btn">19:00</button>
            </div>
        </section>

        <button class="schedule-btn">Marcar consulta</button>

        <footer>
            <nav>
                <div class="navegacao">
                    <img src="src/home.png" alt="Home">
                </div>
                <div class="navegacao">
                    <img src="src/dog.png" alt="Pet">
                </div>
                <div class="navegacao">
                    <img src="src/calendar.png" alt="Agenda">
                </div>
            </nav>
        </footer>
    </div>

    <script>
        let selectedDate = null;
        let selectedTime = null;
        const months = [
            'Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
        ];
        let currentMonth = 11; 
        let currentYear = 2024;

        function updateMonthDisplay() {
            const monthTitle = document.querySelector('.current-month h2');
            const yearSpan = document.querySelector('.current-month span');
            monthTitle.textContent = months[currentMonth];
            yearSpan.textContent = currentYear;
        }

        function generateCalendar(year, month) {
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            
            const calendarGrid = document.getElementById('calendar-days');
            calendarGrid.innerHTML = '';
            
            for (let i = 0; i < startDay; i++) {
                const emptyCell = document.createElement('button');
                emptyCell.className = 'date-btn disabled';
                calendarGrid.appendChild(emptyCell);
            }
            
            for (let day = 1; day <= totalDays; day++) {
                const dateCell = document.createElement('button');
                dateCell.className = 'date-btn';
                dateCell.textContent = day;
                
                if (selectedDate === day) {
                    dateCell.classList.add('available');
                }
                
                dateCell.addEventListener('click', function() {
                    document.querySelectorAll('.date-btn').forEach(btn => 
                        btn.classList.remove('available'));
                    this.classList.add('available');
                    selectedDate = day;
                });
                
                calendarGrid.appendChild(dateCell);
            }
        }

        document.querySelector('.prev-month').addEventListener('click', function() {
            if (currentMonth === 0) {
                currentMonth = 11;
                currentYear--;
            } else {
                currentMonth--;
            }
            updateMonthDisplay();
            generateCalendar(currentYear, currentMonth);
        });

        document.querySelector('.next-month').addEventListener('click', function() {
            if (currentMonth === 11) {
                currentMonth = 0;
                currentYear++;
            } else {
                currentMonth++;
            }
            updateMonthDisplay();
            generateCalendar(currentYear, currentMonth);
        });

        document.querySelectorAll('.time-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.time-btn').forEach(btn => 
                    btn.classList.remove('available'));
                this.classList.add('available');
                selectedTime = this.textContent;
            });
        });

        document.querySelector('.schedule-btn').addEventListener('click', function() {
            if (selectedDate && selectedTime) {
                alert(`Consulta agendada para ${selectedDate}/${currentMonth + 1}/${currentYear} às ${selectedTime}`);
            } else {
                alert('Por favor selecione uma data e horário');
            }
        });

        updateMonthDisplay();
        generateCalendar(currentYear, currentMonth);
    </script>
</body>
</html>